```
awk '{print $1}' access.log | sort | uniq -c | sort -nr
```

## 这个命令的工作原理如下：

awk '{print $1}' access.log：这个命令用于提取日志文件中每行的第一列（即IP地址）。awk是一个强大的文本处理工具，{print $1}指示它打印每行的第一个字段（默认字段分隔符是空格）。

sort：这个命令将awk输出的所有IP地址排序。这是为了让相同的IP地址排列在一起，从而可以被下一个命令uniq正确计数。

uniq -c：这个命令用于计数（-c选项）连续出现的重复行（在这个例子中是IP地址）。每个IP地址的出现次数将被添加到该IP地址的前面。

sort -nr：最后，这个命令将结果按数字顺序进行排序（-n），并以逆序（从大到小）输出（-r），这样最常出现的IP地址将首先显示。

## 导出日志
以上命令会将所有的ip出现的次数倒序排列, 我们通常只需要前面的ip就够了, 可以通过以下剪切出前200个ip并保存到文件中
```
awk '{print $1}' access.log | sort | uniq -c | sort -nr | head -n 200 > ip_order.log
```
